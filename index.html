<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Kicadlibrary by baden</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.0.min.js" ></script>
    <script type="text/javascript" src="http://underscorejs.org/underscore-min.js" ></script>

    <script src="http://www.x3dom.org/release/x3dom.js"></script>
    <link rel="stylesheet" href="http://www.x3dom.org/release/x3dom.css">
    <style>
        x3d {
            border: none;
        }
        table.gallery tr td {
            cursor: pointer;
        }
        table.gallery tr td.active, table.gallery tr td:active {
            border: 1px solid black;
        }
        table.gallery tr td:hover {
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
        }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Kicadlibrary</h1>
        <p>My own KiCad library repository</p>

        <p class="view"><a href="https://github.com/baden/KiCadLibrary">View the Project on GitHub <small>baden/KiCadLibrary</small></a></p>


        <ul>
          <li><a href="https://github.com/baden/KiCadLibrary/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/baden/KiCadLibrary/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/baden/KiCadLibrary">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Список моделей.</h3>

<x3d width='500px' height='500px'>
  <scene id="mainScene">
      <viewpoint position="-3.34 -7.78 5.32" orientation="0.92 -0.2 -0.33 1.07"></viewpoint>
      <inline id="inlineBox" nameSpaceName="dcm" url="https://raw.githubusercontent.com/baden/KiCadLibrary/master/models/Inductor_NR6028T100M.x3d"> </inline>
  </scene>
</x3d>


<table id="demo_table" class="gallery">
</table>

<script>
$(document).ready(function(){

    // Please not use this code!!!
    // Realy! Not do it!
    // This code is SUX!
    var repo = "https://raw.githubusercontent.com/baden/KiCadLibrary/master/";

    var list = repo + "list.json";

    var maper = function(marker, item) {
      var last = _.last(marker);
      if(last.length < 4) {
        last.push(item);
      } else {
        marker.push([item]);
      }
      return marker;
    }

    var maper3 = function(marker, item) {
      var col = '' +
        '<td file="' + item + '.x3d">' +
          '<img src="'+repo+'images/' + item + '.png" width="128" height="128" />' +
          '<p>' + item + '</p>' +
        '</td>';
      return marker + col;
    }

    var maper2 = function(marker, item) {
      // console.log("item=", item);
      var c = _.reduce(item, maper3, "");
      var row = "<tr>" + c + "</tr>";
      return marker + row;
    }

    $.getJSON(list , function( models ) {
      v = _.reduce(models, maper, [[]]);
      // console.log(["v=", v]);
      r = _.reduce(v, maper2, "");
      // console.log(["r=", r]);
      $(".gallery").html(r);

      // for(var m in models.plit)
      $(".gallery td").on("click", function() {
        var file = repo + "/models/" + $(this).attr('file');

        //Replace the x3d file in the context (if not already loaded)
        if(file != $('#inlineBox').attr('url'))
        $('#inlineBox').attr('url', file);
        $(this).parent().parent().find('td').removeClass('active');
        $(this).addClass('active');
      });
    });

	});
</script>

<p><a href="examples.html">Примеры плат, в которых используется библиотека.</a></p>

<p>Тренируюсь с <a href="http://doc.x3dom.org/tutorials/basics/hello/index.html">http://doc.x3dom.org/tutorials/basics/hello/index.html</a></p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/baden">baden</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
